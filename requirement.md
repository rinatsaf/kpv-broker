(Критерии качества требований)

    Измеримое
    Проверяемое
    Конкретное
    Однозначное
    Не противоречивое

1) Что создаём
    
    Брокер сообщений - промежуточное ПО, обеспечивающее асинхронный обмен данными между компонентами системы,
    принимая сообщения от отправителей (продюсеров) и доставляя их получателям (потребителям).

2) Бизнес требования

    Обеспечить надежную асинхронную передачу данных между микросервисами.
    Развязать отправителей и получателей сообщений (чтобы они не знали друг о друге).
    Гарантировать доставку сообщений даже при временной недоступности получателя.

3) Пользователи (Клиенты системы)

    Backend-разработчики (пишут код отправки/получения).
    Микросервисы (автоматические клиенты: сервис заказов, сервис уведомлений).
    Администраторы (мониторят очереди, смотрят логи).

4) Пути решения (Архитектура)

    Реализовать сетевой протокол (поверх gRPC).
    Хранение очередей: в оперативной памяти (для скорости) + опционально на диск (для надежности).
    Реализовать паттерн «Издатель-Подписчик» (Pub/Sub) и классические очереди.

5) Пользовательские требования (Что умеет делать клиент через API)

    Управление очередями:
        Создать новую очередь.
        Удалить очередь / Очистить очередь.
        Посмотреть статус очереди (сколько сообщений ждет).
    Работа с сообщениями:
        Опубликовать (Publish) сообщение в обменник/очередь.
        Подписаться (Consume) на получение сообщений.
        Подтвердить получение (ACK) или отклонить (NACK).
    Маршрутизация:
        Настроить правила: «Все сообщения с тегом error идут в очередь logs_error».

6) Функц. требования (Внутренняя логика системы)

    Ядро:
        Менеджер соединений (поддержание Keep-Alive с клиентами).
        Диспетчер сообщений (роутинг от отправителя к нужной очереди).
    Хранилище:
        Сериализация сообщений (превращение объекта в байты).
        Персистентность (сохранение на диск критичных сообщений, чтобы не потерять при рестарте).
    Логика очередей:
        Поддержка FIFO (First In, First Out).
        Таймауты сообщений (TTL — время жизни сообщения).
        Dead Letter Queue (очередь для «мертвых» сообщений, которые никто не забрал).

7) Не функц. требования (NFR — Производительность и надежность)

    Задержка (Latency): Доставка сообщения внутри сети < 10 мс.
    Пропускная способность (Throughput): Система должна выдерживать минимум 1 000 сообщений в секунду на одном ядре.
    Надежность: При падении процесса брокера, сохраненные на диск сообщения не должны теряться.
    Конкурентность: Поддержка минимум 50 одновременных подключений клиентов.
    Ресурсы: Потребление RAM не более 512 Мб при простое.

8) Не цели (Out of Scope — Что мы НЕ делаем)

    Кластеризация: Не делаем распределенную сеть из нескольких брокеров (это слишком сложно для учебного проекта).
    Сложная безопасность: Не делаем SSL/TLS шифрование и сложную систему пользователей/паролей (только базовый токен или без защиты).
    Web UI: Не рисуем красивый веб-интерфейс (как у RabbitMQ Management), ограничимся консолью (CLI) или простым API.
    Транзакции: Не поддерживаем распределенные транзакции (XA).
